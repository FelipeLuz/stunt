@page "/upload"

<div class="d-flex flex-column justify-content-start align-items-center pt-5 pb-5 bg-light" style="min-height: 100vh;">
    <div class="shadow-lg p-5 bg-white rounded-lg" style="width: 80%; max-width: 600px;">
        <h3 class="text-center text-primary mb-4">Upload de Documentos</h3>
        @if (!isUploadFinalized) {
            <div class="form-group mb-4">
                <label for="rgUpload"><span class="oi oi-cloud-upload"></span> RG <span class="custom-badge">PNG</span><span class="custom-badge">JPEG</span></label>
                <InputFile id="rgUpload" OnChange="@((e) => HandleFileUpload(e, "RG"))" />
            </div>

            <div class="form-group mb-4">
                <label for="residenceProofUpload"><span class="oi oi-cloud-upload"></span> Comprovante de Residência <span class="custom-badge">PDF</span><span class="custom-badge">PNG</span><span class="custom-badge">JPEG</span></label>
                <InputFile id="residenceProofUpload" OnChange="@((e) => HandleFileUpload(e, "Comprovante de Residência"))" />
            </div>

            <div class="form-group mb-4">
                <label for="enrollmentCertificateUpload"><span class="oi oi-cloud-upload"></span> Atestado de Matrícula <span class="custom-badge">PDF</span><span class="custom-badge">PNG</span><span class="custom-badge">JPEG</span></label>
                <InputFile id="enrollmentCertificateUpload" OnChange="@((e) => HandleFileUpload(e, "Atestado de Matrícula"))" />
            </div>

            <div class="form-group mb-4">
                <label for="attendanceCertificateUpload"><span class="oi oi-cloud-upload"></span> Atestado de Frequência <span class="custom-badge">PDF</span><span class="custom-badge">PNG</span><span class="custom-badge">JPEG</span></label>
                <InputFile id="attendanceCertificateUpload" OnChange="@((e) => HandleFileUpload(e, "Atestado de Frequência"))" />
            </div>

            <button @onclick="FinalizeUpload" class="btn btn-primary w-100 mt-3 mb-3">Finalizar</button>

            <small class="text-muted d-block mt-4">* Limite de upload por arquivo: 10 MB</small>
        }
        else
        {
            <div class="alert alert-success mt-4" role="alert">
                <h4 class="alert-heading"><span class="oi oi-check"></span> Documentos enviados com sucesso!</h4>
                <p>Seus documentos foram enviados para análise. Por favor, aguarde.</p>
                <hr>
                <p class="mb-0">Você receberá o parecer por email. Agradecemos a sua paciência.</p>
            </div>
        }
    </div>
</div>

@code {
    private string message = "";
    private bool isUploadFinalized = false;

    private void HandleFileUpload(InputFileChangeEventArgs e, string fileType)
    {
        var file = e.File;
        if (file != null)
        {
            //message += $"Uploaded {fileType}: {file.Name}\n";
        }
    }

    private void FinalizeUpload()
    {
        isUploadFinalized = true; // This will cause the form to be replaced by the success message
        message = "Seus documentos serão enviados para análise. Você receberá o parecer por email.";
    }
}
